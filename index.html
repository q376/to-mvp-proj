<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>TonArcade - Play Games, Earn TON</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">TonArcade</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showSection('home')">üè† Home</a></li>
                <li><a href="#" onclick="showSection('games')">üéÆ Games</a></li>
                <li><a href="#" onclick="showSection('account')">üë§ Account</a></li>
            </ul>
            <div class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="auth-buttons">
                <div id="ton-connect-button"></div>
            </div>
        </nav>
    </header>

    <!-- Home Section -->
    <section id="home" class="section active">
        <div class="hero">
            <div class="hero-content">
                <h1>TonArcade</h1>
                <p>üéÆ Play Free Games ‚Ä¢ Connect Your TON Wallet ‚Ä¢ More Coming Soon</p>
                <div class="hero-buttons">
                    <a href="#" class="btn btn-primary" onclick="showSection('games')">üöÄ Start Playing</a>
                </div>
            </div>
        </div>

        <div class="container">
            <h2>‚ö° How It Works</h2>
            
            <div class="info-grid">
                <div class="info-card">
                    <span class="info-icon">üéÆ</span>
                    <h3>Play Free Games</h3>
                    <p>Jump into our growing arcade of classic games. No signup required, just play!</p>
                </div>
                <div class="info-card">
                    <span class="info-icon">üíé</span>
                    <h3>Connect TON Wallet</h3>
                    <p>Link your TON wallet to save your progress and prepare for future rewards.</p>
                </div>
                <div class="info-card">
                    <span class="info-icon">üöÄ</span>
                    <h3>Coming Soon</h3>
                    <p>Tournaments, leaderboards, and real TON prizes are in development. Stay tuned!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Games Section -->
    <section id="games" class="section">
        <div class="container">
            <h2>üéÆ Available Games</h2>
            
            <h3>üé™ Arcade Classics</h3>
            <div class="games-grid">
                <div class="game-card">
                    <div class="game-icon">ü¶Ö</div>
                    <h3>Flappy Crypto</h3>
                    <p>Navigate through pipes in this addictive arcade hit!</p>
                    <button class="btn btn-primary" onclick="playGame('flappy')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üî¢</div>
                    <h3>The 2048 Fusion</h3>
                    <p>Merge the tiles to reach number 2048 and beyond!</p>
                    <button class="btn btn-primary" onclick="playGame('2048')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üêç</div>
                    <h3>Snake Evolution</h3>
                    <p>Grow your snake without hitting the walls!</p>
                    <button class="btn btn-primary" onclick="playGame('snake')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üé¥</div>
                    <h3>Memory Master</h3>
                    <p>Test your memory by matching card pairs!</p>
                    <button class="btn btn-primary" onclick="playGame('memory')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üí£</div>
                    <h3>Mine Sweeper Pro</h3>
                    <p>Clear the minefield without triggering explosions!</p>
                    <button class="btn btn-primary" onclick="playGame('minesweeper')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üí•</div>
                    <h3>Brick Breaker</h3>
                    <p>Destroy all bricks with precision and skill!</p>
                    <button class="btn btn-primary" onclick="playGame('breakout')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">üèì</div>
                    <h3>The Pong Game</h3>
                    <p>Beat your opponent and don't lose the ball!</p>
                    <button class="btn btn-primary" onclick="playGame('pong')">üöÄ Play Now</button>
                </div>
                <div class="game-card">
                    <div class="game-icon">‚ö°</div>
                    <h3>Lightning Reaction</h3>
                    <p>Test your reflexes! Click when it turns green!</p>
                    <button class="btn btn-primary" onclick="playGame('reaction')">üöÄ Play Now</button>
                </div>
            </div>

            <div class="coming-soon" style="margin-top: 4rem;">
                <h3>üèÜ Tournaments & Rewards</h3>
                <p>Competitive tournaments with real TON prizes are coming soon. Keep playing and improving your skills!</p>
            </div>
        </div>
    </section>

    <!-- Account Section -->
    <section id="account" class="section">
        <div class="container">
            <h2>üë§ My Account</h2>
            <div id="account-info">
                <div class="coming-soon">
                    <h3>üíé Connect Your TON Wallet</h3>
                    <p>Click the "Connect Wallet" button in the top right to link your TON wallet and get ready for future features!</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 TonArcade - MVP Beta Version</p>
            <p style="margin-top: 0.5rem; opacity: 0.7;">üöß Platform in Active Development</p>
        </div>
    </footer>

    <!-- Game Player Modal -->
    <div id="game-modal">
        <div>
            <iframe id="game-frame" src=""></iframe>
            <button onclick="closeGame()">‚úñ Close</button>
        </div>
    </div>

    <script>
        // TON Connect
        let tonConnectUI = null;
        let currentWallet = null;

        // Initialize TON Connect
        function initTonConnect() {
            tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
                manifestUrl: 'https://tonnaton.netlify.app/toncon-manifest.json',
                buttonRootId: 'ton-connect-button'
            });

            tonConnectUI.onStatusChange(wallet => {
                if (wallet) {
                    console.log('Wallet connected:', wallet);
                    currentWallet = wallet.account.address;
                    handleWalletConnected(wallet);
                } else {
                    console.log('Wallet disconnected');
                    currentWallet = null;
                    handleWalletDisconnected();
                }
            });

            const currentState = tonConnectUI.wallet;
            if (currentState) {
                currentWallet = currentState.account.address;
                handleWalletConnected(currentState);
            }
        }

        function handleWalletConnected(wallet) {
            const walletAddress = wallet.account.address;
            showNotification('Wallet connected successfully! üéÆ', 'success');
            renderAccountInfo(walletAddress);
        }

        function handleWalletDisconnected() {
            showNotification('Wallet disconnected', 'info');
            location.reload();
        }

        function renderAccountInfo(address) {
            const accountInfo = document.getElementById('account-info');
            const shortAddress = address.substring(0, 6) + '...' + address.substring(address.length - 4);
            
            accountInfo.innerHTML = `
                <div class="account-profile">
                    <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(45deg, #4ecdc4, #45b7d1); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; margin: 0 auto 1.5rem;">
                        üíé
                    </div>
                    <h3>Wallet Connected</h3>
                    <p>${address}</p>
                    <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; font-family: 'Inter', sans-serif;">
                        Your progress is now being tracked. Tournaments and rewards coming soon!
                    </p>
                </div>
            `;
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const toggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            toggle.classList.toggle('active');
            navLinks.classList.toggle('mobile-open');
        }

        // Section navigation
        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionName).classList.add('active');
            
            // Close mobile menu
            const toggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            toggle.classList.remove('active');
            navLinks.classList.remove('mobile-open');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Game functionality
        function playGame(gameId) {
            const gameMap = {
                "flappy": "games/flappy/index.html",
                "2048": "games/2048/index.html",
                "snake": "games/snake/snaki.html",
                "memory": "games/memory/index.html",
                "pong": "games/pong.html",
                "reaction": "games/reaction.html",
                "breakout": "games/breakout/index.html",
                "minesweeper": "games/minesweeper/index.html",
            };

            const gameUrl = gameMap[gameId];
            if (!gameUrl) {
                showNotification("Game coming soon!", 'info');
                return;
            }

            document.getElementById("game-frame").src = gameUrl;
            document.getElementById("game-modal").style.display = "flex";
        }

        function closeGame() {
            document.getElementById("game-frame").src = "";
            document.getElementById("game-modal").style.display = "none";
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const isMobile = window.innerWidth <= 768;
            
            notification.style.cssText = `
                position: fixed;
                ${isMobile ? 'top: 80px; right: 10px; left: 10px;' : 'top: 20px; right: 20px; max-width: 300px;'}
                padding: 1rem 2rem;
                border-radius: 10px;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(10px);
                color: white;
                font-weight: 600;
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = 'linear-gradient(45deg, #4ecdc4, #45b7d1)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(45deg, #ff6b6b, #ff5722)';
                    break;
                case 'info':
                    notification.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
                    break;
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 5000);
        }

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(0, 0, 0, 0.95)';
            } else {
                header.style.background = 'rgba(0, 0, 0, 0.85)';
            }
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(e) {
            const nav = document.querySelector('nav');
            const toggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (!nav.contains(e.target)) {
                toggle.classList.remove('active');
                navLinks.classList.remove('mobile-open');
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initTonConnect();
        });

        // Keyboard shortcut to close game (ESC)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeGame();
            }
        });
    </script>
</body>

</html>

